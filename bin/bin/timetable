#!/bin/sh
# script to display the next possible bus times from Oehningen Endorf
# to Radolfzell ZOB

curl -s 'https://mobile.bahn.de/bin/mobil/query.exe/dox?ld=4266&protocol=https:&n=2&i=79.0359666.1553879844&rt=1&use_realtime_filter=1&webview=&OK#focus' \
  -H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8' \
  -H 'Content-Type: application/x-www-form-urlencoded' \
  -H 'Pragma: no-cache' \
  -H 'Cache-Control: no-cache' \
  --data 'queryPageDisplayed=yes&REQ0JourneyStopsS0A=1&REQ0JourneyStopsS0K=S1-0N1&REQ0JourneyStopsZ0A=1&REQ0JourneyStopsZ0K=S1-6N1&locationErrorShownto=yes&REQ0JourneyDate=29.03.19&REQ0JourneyTime=18%3A17&REQ0HafasSearchForw=1&existOptimizePrice=1&REQ0HafasOptimize1=0%3A1&REQ0Tariff_TravellerType.1=E&REQ0Tariff_TravellerReductionClass.1=0&REQ0Tariff_Class=2&rtMode=12&existRTMode=1&immediateAvail=ON&start=Suchen' \
  | rg -o 'abfahrt = "[0-9-]+T?([0-9:]+)"' \
  | uniq
